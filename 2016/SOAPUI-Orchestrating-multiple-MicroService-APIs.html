<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="_A software enginner focused on Quality!_ - This website has a colleciton of my personal notes"><title>SOAPUI - Orchestrating multiple MicroService APIs | Manju Paul</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.2.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">SOAPUI - Orchestrating multiple MicroService APIs</h1><a id="logo" href="/.">Manju Paul</a><p class="description"><i>A software engineer focused on Quality</i><span> - A colleciton of my notes</span></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home fa-2x"> Home</i></a><a href="/archives/"><i class="fa fa-archive fa-2x"> Archive</i></a><a href="/about/"><i class="fa fa-user fa-2x"> About</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">SOAPUI - Orchestrating multiple MicroService APIs</h1><div class="post-meta">Jul 19, 2016<span> | </span><span class="category"><a href="/categories/tools/">tools</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-disqus-identifier="2016/SOAPUI-Orchestrating-multiple-MicroService-APIs.html" href="/2016/SOAPUI-Orchestrating-multiple-MicroService-APIs.html#disqus_thread" class="disqus-comment-count"></a><div class="post-content"><p>Internet of MicroServices is the backbone on which IOT stands. Amazon Echo playing music from your album or Camera uploading the photos you take directly to Google Photos etc. <a id="more"></a> When you make an order in Amazon, the ordering system will ask the Inventory system to hold the items, and when payment is made it will ask shipping system to process the shipment. Well, testing this fictitious Amazon servies is not in scope. In this post I will show how SoapUI can be used to orchestrate two dispirate RESTful webservice.</p>
<h3 id="The-plot"><a href="#The-plot" class="headerlink" title="The plot"></a>The plot</h3><p>Find the Congressman of your city. For this we will use two publically available service.</p>
<ul>
<li><a href="https://www.zipcodeapi.com" target="_blank" rel="external">ZipcodeAPI</a> - Has web service endpoints that can return the zip codes within a city.</li>
<li><a href="https://sunlightlabs.github.io/congress/index.html" target="_blank" rel="external">Sunlight Lbs</a> A web service endpoint that can locate the senator based upon zip code.<br>The idea is to first identify the zip codes in a city and then use these zipcode to figure out the current senator.</li>
</ul>
<h3 id="Accessing-the-APIs-Manually"><a href="#Accessing-the-APIs-Manually" class="headerlink" title="Accessing the APIs Manually"></a>Accessing the APIs Manually</h3><p>Let’s first test these manually and see how it is functioning. But, before we begin we should register for an API key by visiting the “<a href="http://www.zipcodeapi.com/API#zipToLoc" target="_blank" rel="external">Register for API key</a>“. The API key that I have got after registering is <code>pz3mr83JCdfPe0BRtKFerVBplteECsq21totCsceFs4TsFLVqqaRlLhHfwlSYMU0</code>.<br> In the sample request below, I passed zipcode as the parameter and in the json Chantilly, VA can be seen.<br>    <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http://www.zipcodeapi.com/rest/pz3mr83JCdfPe0BRtKFerVBplteECsq21totCsceFs4TsFLVqqaRlLhHfwlSYMU0/multi-info.json/20152/degrees</div></pre></td></tr></table></figure></p>
<p>   <img src="../downloads/img_restapi/manualyResult1.png" alt=""></p>
<p> Next lets use [sunlightlabs] (<a href="https://sunlightlabs.github.io/congress/index.html" target="_blank" rel="external">https://sunlightlabs.github.io/congress/index.html</a>). In order to access the service, we need to obtain an <a href="http://sunlightfoundation.com/api/accounts/register/" target="_blank" rel="external">API key</a>. Shown below a sample request and the corresponding result<br> <code>https://sunlightlabs.github.io/congress/index.html/legislators/locate/?zip=xxxx&amp;apikey=xxxxx</code></p>
<p>  <img src="../downloads/img_restapi/manual_congtress_img2.png" alt=""></p>
<h3 id="Testing-using-RESTAPI-service"><a href="#Testing-using-RESTAPI-service" class="headerlink" title="Testing using RESTAPI service"></a>Testing using RESTAPI service</h3><p>Now lets look into how we can perform the above using SoapUI.<br> Step1 :Add a REST request to the zipcodeapi webservice endpoint.ie <a href="https://www.zipcodeapi.com/rest/apikey/city-zips.xml/CITY-NAME/STATE" target="_blank" rel="external">https://www.zipcodeapi.com/rest/apikey/city-zips.xml/CITY-NAME/STATE</a>.</p>
<p> Step 2 : Add a REST request to Sunlight congress API  endpoint. i.e <a href="https://sunlightlabs.github.io/congress/index.html/legislators/locate/?zip=xxxx&amp;apikey=xxxxx" target="_blank" rel="external">https://sunlightlabs.github.io/congress/index.html/legislators/locate/?zip=xxxx&amp;apikey=xxxxx</a></p>
<p> Step 3 :Create a test suite add include the above two request to a TestCase.</p>
<p> Step 4 : Add property transfer step between these REST calls to transfer the <code>zip code</code> from zipcodeapi XML response and add it to sunlightlabs request. <a href="https://www.soapui.org/functional-testing/teststep-reference/property-transfers.html" target="_blank" rel="external">Property Transfer</a> enables us to transfer the values from one step to another. The picture below shows how I have configured the property transfer step.<br>    <img src="../downloads/img_restapi/propertytransfer.png" alt=""></p>
<p> Step 5 : Add a few assertions on every REST request.</p>
<p> Step 6 : Run the TestSuite and check the result</p>
<p>   <img src="../downloads/img_restapi/runtestsuite.png" alt=""></p>
<p>I have shared the entire SoapUI project in <a href="https://github.com/manjupaul/soapui_findyourrep" target="_blank" rel="external">soapui_findyourrep</a> repository.</p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="https://manjupaul.github.io/2016/SOAPUI-Orchestrating-multiple-MicroService-APIs.html" data-id="citver55u000g38vbq2xbgx77" class="article-share-link">Share</a><div class="tags"><a href="/tags/REST/">REST</a><a href="/tags/SoapUI/">SoapUI</a></div><div class="post-nav"><a href="/2016/MongoDB-Aggregation.html" class="pre">MongoDB - Aggregation</a><a href="/2016/Agile-ISTQB-Certification-Worthy.html" class="next">Agile - ISTQB Certification Worthy?</a></div><div id="disqus_thread"><script>var disqus_shortname = 'manjupaul';
var disqus_identifier = '2016/SOAPUI-Orchestrating-multiple-MicroService-APIs.html';
var disqus_title = 'SOAPUI - Orchestrating multiple MicroService APIs';
var disqus_url = 'https://manjupaul.github.io/2016/SOAPUI-Orchestrating-multiple-MicroService-APIs.html';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//manjupaul.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://manjupaul.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o fa-lg"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/agile/">agile</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/certification/">certification</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/cooking/">cooking</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/testing/">testing</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tools/">tools</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/tools/database/">database</a></li></ul></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o fa-lg"> Tags</i></div><div class="tagcloud"><a href="/tags/performance/" style="font-size: 15px;">performance</a> <a href="/tags/istqb/" style="font-size: 15px;">istqb</a> <a href="/tags/potato/" style="font-size: 15px;">potato</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/postgresql/" style="font-size: 15px;">postgresql</a> <a href="/tags/egg/" style="font-size: 15px;">egg</a> <a href="/tags/mongodb/" style="font-size: 15px;">mongodb</a> <a href="/tags/nosql/" style="font-size: 15px;">nosql</a> <a href="/tags/jmeter/" style="font-size: 15px;">jmeter</a> <a href="/tags/agile/" style="font-size: 15px;">agile</a> <a href="/tags/REST/" style="font-size: 15px;">REST</a> <a href="/tags/SoapUI/" style="font-size: 15px;">SoapUI</a> <a href="/tags/API/" style="font-size: 15px;">API</a> <a href="/tags/payasam/" style="font-size: 15px;">payasam</a> <a href="/tags/SQL/" style="font-size: 15px;">SQL</a> <a href="/tags/PostgreSQL/" style="font-size: 15px;">PostgreSQL</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/persona/" style="font-size: 15px;">persona</a> <a href="/tags/actor/" style="font-size: 15px;">actor</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o fa-lg"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/User-Centered-Design-Testing.html">User Centered Design - Testing</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/JMeter-Getting-started.html">JMeter - Getting started</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/SoapUI-Asserting-data-in-MongoDB-collections.html">SoapUI - Asserting data in MongoDB collections</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/MongoDB-Aggregation.html">MongoDB - Aggregation</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/SOAPUI-Orchestrating-multiple-MicroService-APIs.html">SOAPUI - Orchestrating multiple MicroService APIs</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/Agile-ISTQB-Certification-Worthy.html">Agile - ISTQB Certification Worthy?</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/SQL-Tricks-Date-Functions.html">SQL Tricks - Date Functions</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/SQL-Tricks-Indexs.html">SQL Tricks - Index</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/MongoDB-Basic-NoSQLs.html">MongoDB - Basic NoSQLs</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/SQL-Tricks-String-Functions.html">SQL Tricks - String Functions</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-lg fa-external-link"> External</i></div><ul></ul><a href="https://www.linkedin.com/in/manju-paul-898a78126" title="LinkedIn" target="_blank">LinkedIn</a><ul></ul><a href="https://github.com/manjupaul" title="GitHub" target="_blank">GitHub</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">Manju Paul.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-84262971-1','auto');ga('send','pageview');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>